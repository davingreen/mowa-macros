"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.googleOauthCallback=exports.googleOauth=undefined;let googleOauth=exports.googleOauth=(()=>{var _ref=_asyncToGenerator(function*(){try{let config=yield Firebase.getMacrosConfig();if(!!config.GOOGLE_CLIENT.tokens&&!!config.GOOGLE_CLIENT.tokens.access_token){console.error("Macros are already authorized. Clear database tokens to reauthorize.");return false}let authUrl=Google.getAuthUrl(config.GOOGLE_CLIENT.id,config.GOOGLE_CLIENT.secret,config.GOOGLE_CLIENT.redirect,config.GOOGLE_CLIENT.scope);return authUrl}catch(e){console.error(e);return false}});return function googleOauth(){return _ref.apply(this,arguments)}})();let googleOauthCallback=exports.googleOauthCallback=(()=>{var _ref2=_asyncToGenerator(function*(code){try{let config=yield Firebase.getMacrosConfig();let tokens=yield Google.getToken(config.GOOGLE_CLIENT.id,config.GOOGLE_CLIENT.secret,config.GOOGLE_CLIENT.redirect,code);return yield Firebase.setGoogleClientTokens(tokens)}catch(e){console.error(e);return false}});return function googleOauthCallback(_x){return _ref2.apply(this,arguments)}})();var _firebase=require("./utils/firebase");var Firebase=_interopRequireWildcard(_firebase);var _google=require("./utils/google");var Google=_interopRequireWildcard(_google);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}
//# sourceMappingURL=auth.js.map